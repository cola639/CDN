window.qq=window.qq{},qq.maps=qq.maps{},window.soso(window.soso=qq),soso.maps(soso.maps=qq.maps),qq.maps.Geolocation=function(){use strict;var e=[],t=null,o=0,n=_geoIframe_+Math.ceil(1e7Math.random()),i=document.createElement(iframe),r=null,s=null,a=null,c=null,u=function(u,l){if(!u)return void alert(è¯·è¾“å…¥keyï¼);if(!l)return void alert(è¯·è¾“å…¥refererï¼);var p=document.getElementById(n);if(!p){i.setAttribute(id,n),i.setAttribute(allow,geolocation);var g=https;i.setAttribute(src,g+apis.map.qq.comtoolsgeolocationkey=+u+&referer=+l),i.setAttribute(style,display none; width 100%; height 30%),document.bodydocument.body.appendChild(i)document.write(i.outerHTML);var m=this;window.addEventListener(message,function(n){var i=n.data;if(i&&geolocation==i.module){if(clearTimeout(c),e.length0){var u=e.shift();u.sucCb&&u.sucCb(i)}o=2,m.executeNextGeo(),t&&t(i)}else{s=(new Date).getTime();var l=s-r;if(l=a){if(e.length0&&geo===e[0].type){var u=e.shift(),p={typefail,code5,messageThe request};u.errCb&&u.errCb(p)}clearTimeout(c),o=-1,m.executeNextGeo()}if(e.length0&&ip===e[0].type){var u=e.shift();u.errCb&&u.errCb(p)}}},!1)}};return u.prototype.executeNextGeo=function(){1!==o&&e.length0&&(o=1,e[0].geoprocess())},u.prototype.getLocation=function(t,n,i){if(i&&i.timeout){var r=new RegExp(^[0-9]$);if(!r.test(i.timeout))return void alert(timeout è¯·è¾“å…¥æ•°å­—)}if(e.length10)throw new Error(geolocation queue must be lass than 10);e.push({sucCbt,errCbn,optioni,geoprocessthis.getOnceLocation,typegeo}),1!==o&&(o=1,this.getOnceLocation())},u.prototype.getOnceLocation=function(){var t=e[0]&&e[0].option;r=(new Date).getTime(),a=t&&t.timeout+t.timeout1e4,clearTimeout(c),c=setTimeout(function(){if(e.length0){var t=e.shift();t.errCb&&t.errCb()}},a),document.getElementById(n).contentWindow.postMessage(getLocation,)},u.prototype.getIpLocation=function(t,n){if(e.length10)throw new Error(geolocation queue mast be lass than 10);e.push({sucCbt,errCbn,geoprocessthis.getOnceIpLocation,typeip}),1!==o&&(o=1,this.getOnceIpLocation())},u.prototype.getOnceIpLocation=function(){document.getElementById(n).contentWindow.postMessage(getLocation.robust,)},u.prototype.watchPosition=function(e){t=e,document.getElementById(n).contentWindow.postMessage(watchPosition,)},u.prototype.clearWatch=function(){t=null,document.getElementById(n).contentWindow.postMessage(clearWatch,)},u}();